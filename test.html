<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <form id="myForm">
        <label for="">Choose Experiment</label>
        <input type="number" id="exp" />
        <label for="">Choose Description</label>
        <input type="text" id="des" />
        <label for="">Category</label>
        <select name="cat" id="mySelect">
          <option value="food">food</option>
          <option value="movie">movie</option>
          <option value="electricity">electricity</option>
          <option value="fuel">fuel</option>
        </select>
        <input type="button" value="Add Expense" onclick="getOption()" />
      </form>
    </div>
    <p id="demo"></p>

    <script>
      const posts = [
        {
          title: "Post One",
          body: "This is Post One",
          // CreatedAt: new Date().getTime(),
        },
        {
          title: "Post two",
          body: "This is Post two",
          // CreatedAt: new Date().getTime(),
        },
      ];
      function getPosts() {
        setTimeout(() => {
          let output = "";
          // let curr = new Date().getTime();
          // console.log(curr);

          posts.forEach((post, index) => {
            output += `<li>${post.title} </li>`;
            document.body.innerHTML = output;
          }, 1000);
        });
      }
      function createPost(post) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            posts.push(post);

            const error = false;
            if (!error) {
              resolve();
            } else {
              reject("Error something went wrong");
            }
          }, 2000);
        });
      }
      function deletePost() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            if (posts.length > 0) {
              resolve(posts.pop());
            } else {
              reject("Array is empty now");
            }
          }, 1000);
        });
      }
      function updateLastUserActivityTime() {
        console.log(new Date().getTime());
        console.log(new Date());
      }
      // function create4thPost(post, callback) {
      //   setTimeout(() => {
      //     posts.push(post);
      //     if (typeof callback === "function") {
      //       return callback();
      //     }
      //   }, 3000);
      // }
      createPost({
        title: "Post Three",
        body: "This is Post Three",
        // CreatedAt: new Date().getTime(),
      })
        .then(() => {
          getPosts();
          deletePost().then((deletedElement) => {
            console.log(deletedElement);
            getPosts();
            deletePost().then(() => {
              getPosts();
              deletePost().then(() => {
                getPosts();
                deletePost()
                  .then(() => {})
                  .catch((err) => console.log("inside cach ", err));
              });
            });
          });
        })
        .catch((err) => console.log(err));

      const promise1 = Promise.resolve("Hello World");
      const promise2 = 10;
      const promise3 = new Promise((resolve, reject) => {
        setTimeout(resolve, 2000, "GoodNBye");
      });
      const promise4 = fetch("https://jsonplaceholder.typicode.com/todos/1")
        .then((response) => response.json())
        .then((json) => console.log(json));

      Promise.all([promise1, promise2, promise3, promise4]).then((values) =>
        console.log(values)
      );
      createPost({
        title: "Post 5",
        body: "This is Post 5",
        // CreatedAt: new Date().getTime(),
      }).then(updateLastUserActivityTime);
      createPost({
        title: "Post 5",
        body: "This is Post 5",
        // CreatedAt: new Date().getTime(),
      }).then(updateLastUserActivityTime);

      deletePost()
        .then(updateLastUserActivityTime)
        .catch((err) => console.log(err));
      // );
      // create4thPost(
      //   {
      //     title: "Post four",
      //     body: "This is Post four",
      //     CreatedAt: new Date().getTime(),
      //   },
      //   createPost(
      //     {
      //       title: "Post four",
      //       body: "This is Post four",
      //       CreatedAt: new Date().getTime(),
      //     },
      //     getPosts
      //   )
      // );
    </script>
  </body>
</html>
